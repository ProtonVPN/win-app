<?xml version="1.0" encoding="utf-8" ?>
<!--
Copyright (c) 2023 Proton AG

This file is part of ProtonVPN.

ProtonVPN is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

ProtonVPN is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with ProtonVPN.  If not, see <https://www.gnu.org/licenses/>.
-->

<Page x:Class="ProtonVPN.Client.UI.Countries.CountriesPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
      xmlns:models="using:ProtonVPN.Client.Models"
      x:Name="PageArea"
      mc:Ignorable="d">

    <StackPanel x:Name="ContentArea"
                Orientation="Vertical">
        <Border Margin="0,0,0,24"
                Padding="24,16"
                x:DefaultBindMode="TwoWay"
                BorderBrush="{StaticResource BorderWeakColorBrush}"
                BorderThickness="1">

            <StackPanel Orientation="Vertical"
                        Spacing="12">
                <TextBox Header="Exit Country:"
                         MaxLength="2"
                         PlaceholderText="Country code"
                         Text="{x:Bind ViewModel.ExitCountryCode, UpdateSourceTrigger=PropertyChanged}" />
                <TextBox Header="City/State:"
                         IsEnabled="{x:Bind ViewModel.IsNotEmpty(ViewModel.ExitCountryCode), Mode=OneWay}"
                         PlaceholderText="City/State name"
                         Text="{x:Bind ViewModel.CityState}" />
                <TextBox Header="Server:"
                         IsEnabled="{x:Bind ViewModel.IsNotEmpty(ViewModel.ExitCountryCode), Mode=OneWay}"
                         PlaceholderText="Server number"
                         Text="{x:Bind ViewModel.ServerNumber}" />

                <StackPanel Orientation="Horizontal"
                            Spacing="32">
                    <ComboBox Width="160"
                              Header="Features:"
                              ItemsSource="{x:Bind ViewModel.Features, Mode=OneTime}"
                              SelectedItem="{x:Bind ViewModel.SelectedFeature}" />
                    <TextBox Width="160"
                             Header="Entry Country:"
                             IsEnabled="{x:Bind ViewModel.IsSecureCore, Mode=OneWay}"
                             MaxLength="2"
                             PlaceholderText="Country code"
                             Text="{x:Bind ViewModel.EntryCountryCode}" />
                </StackPanel>

                <controls:DockPanel LastChildFill="False">
                    <Button Margin="0,8,16,0"
                            controls:DockPanel.Dock="Left"
                            Command="{x:Bind ViewModel.ConnectCommand, Mode=OneWay}"
                            Content="Connect"
                            Style="{StaticResource PrimaryButtonStyle}" />
                    <Button Margin="0,8,16,0"
                            controls:DockPanel.Dock="Left"
                            Command="{x:Bind ViewModel.FreeConnectCommand, Mode=OneWay}"
                            Content="Free Connect" />
                    <Button Margin="16,8,0,0"
                            controls:DockPanel.Dock="Right"
                            Command="{x:Bind ViewModel.SimulateManyConnectionsCommand, Mode=OneWay}"
                            Content="Auto" />
                </controls:DockPanel>
            </StackPanel>
        </Border>
        <ItemsControl ItemsSource="{x:Bind ViewModel.Countries}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical"
                                Spacing="8" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate x:DataType="models:Country">
                    <Button Command="{Binding ViewModel.NavigateToCountryCommand, ElementName=PageArea}"
                            CommandParameter="{x:Bind}"
                            Content="{x:Bind CountryName}" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </StackPanel>
</Page>